<div class="color">
    <img *ngIf="this.storageService.isDesktop()" align="center" style="width: 97%" src="assets/logo/plannerixLogo.png">
    <div class="container" >
      <h1 *ngIf="!this.storageService.isDesktop()" class="title">Профил</h1>
    </div>
</div>
<mat-divider style="margin-bottom:5px"></mat-divider>
<div class="main-body">
  <section style="padding-left:10px">
      <h4>{{username}}</h4>  
  </section>
  <mat-divider></mat-divider>
  <section >
    <mat-accordion>

      <mat-expansion-panel 
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Edit Profile
          </mat-panel-title>
        </mat-expansion-panel-header>
        <section [formGroup]="passwordForm" (change)="checkPasswordFormValidation()">
          <p>Смяна на парола: </p>
          <mat-form-field hintLabel="От 8 до 35 символа">
            <input type="password" formControlName="password" matInput placeholder="Парола:">
            <mat-error >{{passwordError}}</mat-error>
          </mat-form-field>
          <mat-form-field>
            <input type="password" formControlName="confirmPassword" matInput placeholder="Потвърди парола:">
            <mat-error >{{confirmPasswordError}}</mat-error>
          </mat-form-field>
          <br>
          <button (click)="changePassword()" [disabled]="!this.passwordForm.valid" class="submitButton" mat-flat-button>Смени парола</button>
        </section>
        <mat-divider></mat-divider>
        <section [formGroup]="emailForm" >
          <p>Смяна на имейл: </p>
          <mat-form-field (input)="validateEmailForm()">
            <input type="email" formControlName="email" matInput placeholder="Нов имейл:">
            <mat-error >{{emailError}}</mat-error>
          </mat-form-field>
          <br>
          <button (click)="changeEmail()" [disabled]="!this.validEmail" class="submitButton" mat-flat-button>Смени имейл</button>
        </section>
      </mat-expansion-panel>

      <mat-expansion-panel 
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Notification Settings
          </mat-panel-title>
        </mat-expansion-panel-header>
        <section class="section">
          <mat-slide-toggle (click)="checkAll(0)" [(ngModel)]="allN">
            Turn notifications off
          </mat-slide-toggle>
        </section>
        <section class="section">
          <mat-slide-toggle (click)="checkAll(1)" [(ngModel)]="periodN">
            Turn period notifications off
          </mat-slide-toggle>
        </section>
        <section class="section">
          <mat-slide-toggle (click)="checkAll(2)" [(ngModel)]="eventsN">
            Turn event notifications off
          </mat-slide-toggle>
        </section>
        <section class="section">
          <mat-slide-toggle (click)="checkAll(3)" [(ngModel)]="improvementN">
            Turn improve notifications off
          </mat-slide-toggle>
        </section>
      </mat-expansion-panel>

    </mat-accordion>
    <button 
    style="float: left; width:100%; border-bottom: thin solid lightgray" 
    type="button" 
    mat-button color="primary">
    <p style="margin:0px;padding:0px;float: left">Edit profile</p></button>
    <button 
    style="float: left; width:100%; border-bottom: thin solid lightgray" 
    type="button" 
    mat-button color="primary">
    <p style="margin:0px;padding:0px;float: left">Notification settings</p></button>
    
    
    <button 
    (click)="logout()"
    style="float: left; width:100%; border-bottom: thin solid lightgray" 
    type="button" 
    mat-button color="warn">
    <p style="margin:0px;padding:0px;float: left">Log out</p></button>
  </section>
</div>