<div style="height:100%; width: 100%;position: relative;">

  <div *ngIf="this.storageService.isDesktop()" class="color">
    <!-- <img align="center" style="width: 97%" src="assets/logo/plannerixLogo.png"> -->
    <div class="container" >
      <h1 class="title">Настройки</h1>
    </div>
</div>
<mat-divider style="margin-bottom:5px"></mat-divider>
<div class="main-body">
  <section style="padding-left:10px">
      <h4>Потребителско име: {{username}}</h4>  
  </section>
  <mat-divider></mat-divider>
  <section >
    <mat-accordion>

      <mat-expansion-panel 
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Настройки на профила
          </mat-panel-title>
        </mat-expansion-panel-header>
        <section [formGroup]="passwordForm" (change)="checkPasswordFormValidation()">
          <p>Смяна на парола: </p>
          <mat-form-field hintLabel="От 8 до 35 символа">
            <input knifeNoCopyPaste type="password" formControlName="password" matInput placeholder="Нова парола:">
            <mat-error >{{passwordError}}</mat-error>
          </mat-form-field>
          <mat-form-field>
            <input knifeNoCopyPaste type="password" formControlName="confirmPassword" matInput placeholder="Потвърди парола:">
            <mat-error >{{confirmPasswordError}}</mat-error>
          </mat-form-field>
          <br>
          <button (click)="changePassword()" [disabled]="!this.passwordForm.valid" class="submitButton" mat-flat-button>Смени парола</button>
        </section>
        <mat-divider></mat-divider>
        <section [formGroup]="emailForm" >
          <p>Смяна на имейл: </p>
          <mat-form-field (input)="validateEmailForm()">
            <input type="email" formControlName="email" matInput placeholder="Нов имейл:">
            <mat-error >{{emailError}}</mat-error>
          </mat-form-field>
          <br>
          <button (click)="changeEmail()" [disabled]="!this.validEmail" class="submitButton" mat-flat-button>Смени имейл</button>
        </section>
      </mat-expansion-panel>

      <mat-expansion-panel 
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Нотификации
          </mat-panel-title>
        </mat-expansion-panel-header>
        <section class="section">
          <mat-slide-toggle (ngModelChange)="checkAll(0)" [(ngModel)]="allN">
            Всички
          </mat-slide-toggle>
        </section>
        <section class="section">
          <mat-slide-toggle  [(ngModel)]="notifications.periodN" (ngModelChange)="checkAll(1)">
            За час
          </mat-slide-toggle>
        </section>
        <section class="section">
          <mat-slide-toggle  [(ngModel)]="notifications.eventsN" (ngModelChange)="checkAll(2)">
            За събития
          </mat-slide-toggle>
        </section>
        <section class="section">
          <mat-slide-toggle  [(ngModel)]="notifications.improvementN" (ngModelChange)="checkAll(3)">
            За подобряване на нивото 
          </mat-slide-toggle>
        </section>
      </mat-expansion-panel>
    </mat-accordion>
  </section>
</div>
<br>
<br>
<br>
  <button 
    (click)="logout()"
    class="logout"
    type="button" 
    mat-button>Излизане
  </button>
</div>