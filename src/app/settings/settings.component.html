<div style="height:100%; width: 100%;position: relative;">

  <div class="color">
    <img *ngIf="this.storageService.isDesktop()" align="center" style="width: 97%" src="assets/logo/plannerixLogo.png">
    <div class="container" >
      <h1 *ngIf="!this.storageService.isDesktop()" class="title">Профил</h1>
    </div>
</div>
<mat-divider style="margin-bottom:5px"></mat-divider>
<div class="main-body">
  <section style="padding-left:10px">
      <h4>{{username}}</h4>  
  </section>
  <mat-divider></mat-divider>
  <section >
    <mat-accordion>

      <mat-expansion-panel 
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Edit Profile
          </mat-panel-title>
        </mat-expansion-panel-header>
        <section [formGroup]="passwordForm">
          <p>Смяна на парола: </p>
          <mat-form-field>
            <input formControlName="password" matInput placeholder="Парола:">
            <mat-error *ngIf="!validatePassword()" >{{validatePasswordError}}</mat-error>
          </mat-form-field>
          <mat-form-field>
            <input formControlName="confirmPassword" matInput placeholder="Потвърди парола:">
          </mat-form-field>
          <br>
          <button (click)="changePassword()" class="submitButton" mat-flat-button>Смени</button>
        </section>
        <mat-divider></mat-divider>
        <section>
          <p>Change Email</p>
          
        </section>
      </mat-expansion-panel>

      <mat-expansion-panel 
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Notification Settings
          </mat-panel-title>
        </mat-expansion-panel-header>
        <section class="section">
          <mat-slide-toggle (ngModelChange)="checkAll(0)" [(ngModel)]="allN">
            Turn notifications on
          </mat-slide-toggle>
        </section>
        <section class="section">
          <mat-slide-toggle  [(ngModel)]="notifications.periodN" (ngModelChange)="checkAll(1)">
            Turn period notifications on
          </mat-slide-toggle>
        </section>
        <section class="section">
          <mat-slide-toggle  [(ngModel)]="notifications.eventsN" (ngModelChange)="checkAll(2)">
            Turn event notifications on
          </mat-slide-toggle>
        </section>
        <section class="section">
          <mat-slide-toggle  [(ngModel)]="notifications.improvementN" (ngModelChange)="checkAll(3)">
            Turn improve notifications on
          </mat-slide-toggle>
        </section>
      </mat-expansion-panel>
    </mat-accordion>
  </section>
</div>
  <button 
    (click)="logout()"
    class="logout"
    type="button" 
    mat-button>Log out
  </button>
</div>